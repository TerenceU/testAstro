---
import BaseButton from '../buttons/BaseButton.astro';

//Interfaccia per le proprietà del componente

interface Props {
  id?: string;
  value?: string;
  placeholder?: string;
  class?: string;
  disabled?: boolean;
  required?: boolean;
  name?: string;
  fullWidth?: boolean;
}

// Definire le proprietà del componente

const { 
  id,
  value,
  placeholder = "Seleziona un'opzione",
  class: className = "",
  disabled = false,
  required = false,
  name,
  fullWidth = false,
  ...props 
} = Astro.props;


// Generare un ID unico per il dropdown se non fornito
const dropdownId = id || `dropdown-${Math.random().toString(36).substr(2, 9)}`;

// Prendere il contenuto dello slot se esiste
const slotContent = Astro.slots.content || Astro.slots.default;

//   - Gestire la disabilitazione del dropdown se richiesto
//   - Gestire la disabilitazione di alcune opzioni se richiesto


// Normalizzare il contenuto dello slot che può essere un elenco di strighe una sotto l'altra 
// (es. <BaseDropdown>
// Opzione 1
// Opzione 2
// </BaseDropdown>), 
// un elenco di img, 
// un elenco di bottoni,
// un elenco di qualsiasi altro tag HTML che verrò quindi trasformato in bottoni,
// se all'interno dello slot c'è un tag qualsiasi ma dentro a quel tag c'è una immagine allora prendere anche l'immagine
// o una qualsiasi combinazione di questi elementi  
// se qualsiasi elemento ha un attributo href allora il bottone deve permettere di navigare a quella pagina,
// il valore dell'opzione se non specificato tramite data-value sarà il testo del bottone,
// nel caso di immagini, il valore sarà l'attributo alt dell'immagine o il nome del file se non specificato,
// in un array di bottoni

---

<!-- Render il dropdown con le opzioni -->

<!--
  Aggiungere una parte di script per gestire il dropdown:
  - Aprire/chiudere il menu al click
  - Selezionare un'opzione e chiudere il menu
  - Gestire la chiusura del menu al click fuori dal dropdown
  - Gestire la chiusura del menu al tasto ESC
  - Gestire la selezione di un'opzione con href e navigare alla pagina
  - Gestione della larghezza automatica del bottone in base al contenuto
  - Gestione della larghezza automatica del menu in base al contenuto
  - Evitare di uscire dai bordi dello schermo
  - Gestire la validazione del dropdown se richiesto, required

-->
